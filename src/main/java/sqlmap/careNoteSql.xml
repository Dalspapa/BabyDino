<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dino.careNote">
	<select id="careNoteList" resultType="dino.dto.CareNoteDto">
		/* careNoteList */
		select a.IDX				/* 캐어카드 고유번호 */
		     , a.D_RESERVE_IDX		/* 예약고유번호 */
		     , a.C_CONTENT			/* 캐어내용 */
		     , k.k_name				/* 캐어아이이름 */
		     , k.k_care_type		/* 캐어타입(야외활동,학습지도,체육놀이,간단청소) */
		     , TO_CHAR(b.START_DATE,'yyyy.mm.dd AMHH:mm') || '~' || TO_CHAR(b.END_DATE,'HH:mm') AS CARE_TIME /* 캐어시간 */
		  from d_carenote a, d_reserve b, d_kidcard k
		 where a.d_reserve_idx = b.idx
		   and b.kid_idx       = k.idx
	</select>
	<insert id="writeCareNote" parameterType="dino.dto.CareNoteDto">
		insert into
			d_carenote
		values(
			d_carenote_idx.nextval,
			100,
			#{c_content},
			sysdate
		)
	</insert>
</mapper>