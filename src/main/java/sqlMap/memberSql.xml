<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dino.member">

	<select id="loginCheck" parameterType="String" resultType="dino.Dto.MemberDto">
		SELECT 
			PWD 
		FROM 
			D_MEMBER 
		WHERE 
			ID = #{id}
	</select>
	
	<select id="getUserInfo" parameterType="String" resultType="dino.Dto.MemberDto">
		SELECT 
			*
		FROM 
			D_MEMBER
		WHERE 
			ID = #{id}
	</select>
	
	<!-- 회원가입 -->
	<insert id="joinMember" parameterType="dino.Dto.MemberDto">
		INSERT INTO 
            D_MEMBER 
        VALUES (
            d_member_idx.nextval,
            #{id}, 
            #{pwd},
            #{name},
           	#{gender}, <!--gender -->
            TO_DATE(#{birth}, 'YYYY-MM-DD'), <!-- date type으로 넣어야함 -->
         	#{tel},
            #{memberType}, <!-- memberType -->
            sysdate,
            #{addr1}, <!-- 시  -->
           	#{addr2}, <!-- 도  -->
           	#{addr3},  <!-- 동부터 상세주소 -->
        	null,
        	null
        )
	</insert>

	<select id="findId" parameterType="Map" resultType="dino.Dto.MemberDto">
		SELECT 
			id 
		FROM 
			d_member 
		WHERE 
			name=#{name} 
		AND 
			tel=#{tel}
	</select>

	<!-- 아이디 중복 체크 -->
	<select id="idCheck" parameterType="String" resultType="Integer">
		SELECT 
			COUNT(id)
		FROM 
			D_MEMBER 
		WHERE 
			ID = #{id}
	</select>	
		

</mapper> 